{% extends 'frontend/base.html' %}
{% load static %}

{% block title %}Accueil - Objets Perdus{% endblock %}

{% block extra_css %}
<style>
:root {
  --main-color: #3E4C49;
  --accent-color: #C8A048;
  --accent-color-dark: #b88f38;
  --light-color: #F9FAFB;
  --hero-bg: #F4F5F7;
  --card-bg: #FFFFFF;
  --partners-bg: #FAFAFA;
  --cta-bg: #F4F5F7;
  --shadow: 0 8px 24px rgba(0,0,0,0.12);
  --radius: 1.2rem;
}

/* ======================
   Fond et structure
====================== */
body { font-family: 'Poppins', sans-serif; scroll-behavior: smooth; background-color: var(--light-color); color: var(--main-color); }

section { padding: 5rem 1rem; border-radius: var(--radius); margin-bottom: 3rem; }

/* ======================
   Fade-up animation
====================== */
.fade-up { opacity: 0; transform: translateY(40px); transition: all 0.8s cubic-bezier(0.5,0,0,1); }
.fade-up.show { opacity: 1; transform: translateY(0); }

/* ======================
   HERO INTRO
====================== */
.hero-intro { background-color: var(--hero-bg); text-align: center; padding: 6rem 1rem; border-radius: var(--radius); box-shadow: var(--shadow); }
.hero-intro h1 { font-size: 2.8rem; font-weight: 700; color: var(--accent-color); margin-bottom: 1rem; }
.hero-intro p { font-size: 1.2rem; max-width: 700px; margin: auto; line-height: 1.7; }

/* ======================
   HERO ACTIONS
====================== */
.hero-actions { display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; margin-top: 2rem; background-color: var(--light-color); border-radius: var(--radius); box-shadow: var(--shadow); padding: 2.5rem 1rem; }
.btn-action { font-weight: 600; padding: 0.85rem 2rem; border-radius: 0.7rem; border: none; text-decoration: none; cursor: pointer; transition: all 0.3s ease; }
.btn-action:hover { transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
.btn-lost { background-color: var(--accent-color); color: var(--light-color); }
.btn-found { background-color: var(--main-color); color: var(--light-color); }
.btn-dashboard { background-color: #2E3836; color: var(--accent-color); }

/* ======================
   CAROUSEL
====================== */
.carousel-inner img { width: 100%; max-height: 450px; object-fit: cover; border-radius: var(--radius); filter: brightness(0.95); transition: transform 0.4s ease, filter 0.4s ease; }
.carousel-inner img:hover { transform: scale(1.03); filter: brightness(1); }
.carousel-caption { background: rgba(62,76,73,0.85); border-radius: 0.6rem; padding: 1rem 1.2rem; }
.carousel-caption h5 { color: var(--accent-color); font-weight: 700; }

/* ======================
   FEATURES / AVANTAGES
====================== */
.features-section .card { padding: 2rem; transition: all 0.3s ease; border-radius: var(--radius); box-shadow: var(--shadow); border: none; }
.features-section .card:hover { transform: translateY(-8px); box-shadow: 0 12px 28px rgba(0,0,0,0.18); }
.features-section i { color: var(--accent-color); font-size: 2.8rem; margin-bottom: 0.8rem; }

/* ======================
   RESTITUTION / TIMELINE
====================== */
#restitution .step { background: var(--card-bg); padding: 1.5rem; border-left: 5px solid var(--accent-color); margin-bottom: 1rem; border-radius: var(--radius); box-shadow: var(--shadow); transition: all 0.3s ease; }
#restitution .step:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.12); }

/* ======================
   PARTENAIRES
====================== */
.partners { padding: 3rem 0; border-radius: var(--radius); box-shadow: var(--shadow); }
.partners img { filter: grayscale(20%); opacity: 0.9; transition: all 0.3s ease; cursor: pointer; }
.partners img:hover { transform: scale(1.1); filter: grayscale(0); }

/* ======================
   CTA FINALE
====================== */
.cta { background: var(--cta-bg); text-align: center; padding: 6rem 1rem; border-radius: var(--radius); box-shadow: var(--shadow); }
.btn-cta { padding: 1rem 2.5rem; font-weight: 700; border-radius: 0.7rem; border: none; cursor: pointer; transition: all 0.3s ease; background-color: var(--accent-color); color: var(--light-color); }
.btn-cta:hover { transform: scale(1.08); background-color: var(--accent-color-dark); }

/* ======================
   Responsive
====================== */
@media(max-width: 992px){ .carousel-inner img{ max-height: 380px; } }
@media(max-width: 768px){ .carousel-inner img{ max-height: 320px; } .carousel-caption{ font-size: 0.95rem; } .hero-intro h1{ font-size:2rem; } }
@media(max-width: 576px){ .hero-intro h1{ font-size:1.6rem; } .features-section i{ font-size:2rem; } }
</style>
{% endblock %}

{% block content %}
<!-- HERO INTRO -->
<section class="hero-intro fade-up">
  <div class="container">
    <h1 class="display-5 mb-4">Bienvenue sur Lost & Found</h1>
    <p>Déclarez un objet perdu, consultez les objets retrouvés et suivez vos démarches en toute sécurité.</p>
  </div>
</section>

<!-- CAROUSEL -->
<section class="py-5 fade-up">
  <div id="carouselAll" class="carousel slide carousel-fade" data-bs-ride="carousel">
    <div class="carousel-inner">
      {% for slide in all_slides %}
      <div class="carousel-item {% if forloop.first %}active{% endif %}">
        <img src="{{ slide.url }}" alt="{{ slide.titre }}">
        <div class="carousel-caption">
          <h5>{{ slide.titre }}</h5>
          <p>{{ slide.description }}</p>
          {% if slide.etat_type == 'perdu' %}
            <span class="badge bg-danger">Perdu</span>
          {% elif slide.etat_type == 'reclame' %}
            <span class="badge bg-warning text-dark">Réclamé</span>
          {% elif slide.etat_type == 'trouve' %}
            <span class="badge bg-success">Trouvé</span>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselAll" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
      <span class="visually-hidden">Précédent</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselAll" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
      <span class="visually-hidden">Suivant</span>
    </button>
  </div>
</section>

<!-- HERO ACTIONS -->
<section class="hero-actions fade-up">
  <a href="{% url 'objets_perdus' %}" class="btn-action btn-lost">Voir Objets perdus</a>
  <a href="{% url 'objets_trouves' %}" class="btn-action btn-found">Voir Objets trouvés</a>
  {% if user.is_authenticated and user.role == 'citoyen' %}
    <a href="{% url 'dashboard_citoyen' %}" class="btn-action btn-dashboard">Mon Dashboard</a>
  {% endif %}
</section>

<!-- FEATURES -->
<section id="about" class="features-section py-5 fade-up">
  <div class="container">
    <h2 class="text-center fw-bold mb-5" style="color: var(--accent-color);">Les avantages de notre plateforme</h2>
    <div class="row text-center g-4">
      <div class="col-md-4">
        <div class="card p-4 h-100">
          <i class="bi bi-box-seam mb-3"></i>
          <h4>Déclarer un objet perdu</h4>
          <p>Signalez un objet perdu grâce à un formulaire simple et intuitif.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card p-4 h-100">
          <i class="bi bi-search mb-3"></i>
          <h4>Consulter les objets retrouvés</h4>
          <p>Vérifiez si votre objet figure parmi les objets retrouvés.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card p-4 h-100">
          <i class="bi bi-clock-history mb-3"></i>
          <h4>Suivre vos démarches</h4>
          <p>Gardez un œil sur vos déclarations et notifications en temps réel.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- RESTITUTION -->
<section id="restitution" class="py-5 fade-up">
  <div class="container">
    <h2 class="text-center fw-bold mb-5" style="color: var(--accent-color);">Comment se passe la restitution</h2>
    <div class="row align-items-center g-4">
      <div class="col-md-6 d-flex flex-wrap justify-content-center gap-3">
        <img src="{% static 'frontend/images/preuve.png' %}" class="img-fluid rounded shadow-sm" alt="Preuve 1" style="max-width: 70%;">
      </div>
      <div class="col-md-6">
        <div class="timeline">
          {% for step in steps %}
          <div class="step mb-3">
            <h5 class="fw-bold">{{ step.title }}</h5>
            <p>{{ step.desc }}</p>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</section>

<!-- PARTENAIRES -->
<section class="partners py-5 text-center fade-up">
  <div class="container">
    <h2 class="fw-bold mb-4" style="color: var(--accent-color);">Nos Partenaires</h2>
    <div class="row justify-content-center align-items-center g-4">
      <div class="col-4 col-md-2"><img src="{% static 'frontend/img/partenaire1.png' %}" class="img-fluid" alt="Partenaire 1"></div>
      <div class="col-4 col-md-2"><img src="{% static 'frontend/img/partenaire2.jpg' %}" class="img-fluid" alt="Partenaire 2"></div>
      <div class="col-4 col-md-2"><img src="{% static 'frontend/img/partenaire3.jpg' %}" class="img-fluid" alt="Partenaire 3"></div>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="cta fade-up">
  <div class="container">
    <h2>Vous avez perdu ou trouvé un objet ?</h2>
    <p>Déclarez-le dès maintenant et aidez-nous à le restituer à son propriétaire.</p>
    <a href="{% url 'declarer_objet' %}" class="btn btn-cta">Faire une déclaration</a>
  </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const elements = document.querySelectorAll(".fade-up");
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add("show");
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.2 });
  elements.forEach(el => observer.observe(el));
});
</script>
{% endblock %}
