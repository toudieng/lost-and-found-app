{% extends 'frontend/base.html' %}
{% load static %}

{% block title %}Accueil - Lost & Found{% endblock %}

{% block extra_css %}
<style>
:root {
  --main-color:  #2f3e46;            /* vert-gris fonc√© */
  --accent-color: #C8A048;          /* dor√© */
  --accent-color-dark: #b88f38;     /* dor√© fonc√© */
  --white: #FFFFFF;                 /* blanc pur */
  --white-soft: #FAFAFA;            /* blanc doux */
  --white-warm: #F5F4F2;            /* blanc chaud */
  --white-light: #F9FAFB;           /* blanc l√©g√®rement bleut√© */
  --hero-bg: #F4F5F7;
  --card-bg: var(--white);
  --partners-bg: var(--white-soft);
  --cta-bg: var(--white-warm);
  --shadow: 0 8px 24px rgba(0,0,0,0.12);
  --radius: 1.2rem;
}

/* ========== GLOBAL ========== */
body {
  font-family: 'Poppins', sans-serif;
  background-color: var(--white-light);
  color: var(--main-color);
  scroll-behavior: smooth;
}
section {
  padding: 5rem 1rem;
  margin-bottom: 3rem;
  border-radius: var(--radius);
}
.fade-up {
  opacity: 0;
  transform: translateY(40px);
  transition: all 0.8s cubic-bezier(0.5,0,0,1);
}
.fade-up.show {
  opacity: 1;
  transform: translateY(0);
}

/* ========== HERO INTRO ========== */
.hero-intro {
    /* Remplacer le background existant */
    background: linear-gradient(135deg, #FFFFFF 0%, #C8A048 100%);
    text-align: center;
    padding: 6rem 1rem;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    color: var(--main-color); /* texte sombre pour contraste sur fond clair */
}
.hero-intro h1 {
    font-size: 2.8rem;
    font-weight: 700;
    color: var(--main-color); /* texte sombre */
    margin-bottom: 1rem;
}
.hero-intro p {
    font-size: 1.2rem;
    max-width: 700px;
    margin: auto;
    line-height: 1.7;
    color: var(--main-color); /* texte sombre */
}


/* ========== ACTION BUTTONS ========== */
.hero-actions {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 1.5rem;
  margin-top: -3rem;
  background-color: var(--white);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 2rem 1rem;
}
.btn-action {
  font-weight: 600;
  padding: 0.9rem 2rem;
  border-radius: 0.7rem;
  border: none;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.3s ease;
}
.btn-action:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.15);
}
.btn-lost {
  background-color: var(--accent-color);
  color: var(--white);
}
.btn-found {
  background-color: var(--main-color);
  color: var(--white);
}
.btn-dashboard {
  background-color: #2E3836;
  color: var(--accent-color);
}

/* ========== CAROUSEL ========== */
.carousel-inner img {
  width: 100%;
  max-height: 480px;
  object-fit: cover;
  border-radius: var(--radius);
  filter: brightness(0.9);
  transition: transform 0.5s ease, filter 0.4s ease;
}
.carousel-inner img:hover {
  transform: scale(1.03);
  filter: brightness(1);
}
.carousel-caption {
  background: rgba(41, 74, 67, 0.85);
  border-radius: 0.8rem;
  padding: 1rem 1.3rem;
  backdrop-filter: blur(6px);
}
.carousel-caption h5 {
  color: var(--accent-color);
  font-weight: 700;
  font-size: 1.3rem;
}

/* ========== FEATURES ========== */
.features-section .card {
  padding: 2rem;
  border-radius: var(--radius);
  border: 1px solid var(--white-soft);
  background-color: var(--white);
  box-shadow: var(--shadow);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.features-section .card:hover {
  transform: translateY(-8px);
  box-shadow: 0 14px 30px rgba(0,0,0,0.18);
}
.features-section i {
  color: var(--accent-color);
  font-size: 2.8rem;
  margin-bottom: 0.8rem;
}

/* ========== RESTITUTION ========== */
#restitution {
  background: var(--white-warm);
  box-shadow: var(--shadow);
}
#restitution .step {
  background: var(--white);
  padding: 1.5rem;
  border-left: 5px solid var(--accent-color);
  margin-bottom: 1rem;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  transition: all 0.3s ease;
}
#restitution .step:hover {
  transform: translateY(-5px);
  background: var(--white-soft);
}

/* ========== PARTNERS ========== */
.partners {
  background-color: var(--white-soft);
  text-align: center;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 4rem 1rem;
}
.partners img {
  filter: grayscale(40%);
  opacity: 0.9;
  transition: all 0.3s ease;
  cursor: pointer;
  border-radius: 10px;
}
.partners img:hover {
  transform: scale(1.1);
  filter: grayscale(0);
  opacity: 1;
}

/* ========== CTA (Blanc/Or Nuanc√©) ========== */
.cta {
  background: linear-gradient(145deg, var(--white-warm) 0%, var(--white) 70%, var(--accent-color) 300%);
  text-align: center;
  padding: 6rem 1rem;
  border-radius: var(--radius);
  color: var(--main-color);
  box-shadow: var(--shadow);
}
.cta h2 {
  color: var(--accent-color);
  font-weight: 700;
}
.cta p {
  max-width: 600px;
  margin: 1rem auto 2rem;
  color: var(--main-color);
}
.btn-cta {
  padding: 1rem 2.5rem;
  font-weight: 700;
  border-radius: 0.7rem;
  border: 2px solid var(--accent-color);
  cursor: pointer;
  background-color: var(--accent-color);
  color: var(--white);
  transition: all 0.3s ease;
}
.btn-cta:hover {
  transform: scale(1.08);
  background-color: var(--main-color);
  color: var(--accent-color);
  border-color: var(--main-color);
}

/* ========== Responsive ========== */
@media(max-width: 992px) {
  .carousel-inner img { max-height: 400px; }
}
@media(max-width: 768px) {
  .carousel-inner img { max-height: 320px; }
  .carousel-caption { font-size: 0.95rem; }
  .hero-intro h1 { font-size:2rem; }
}
@media(max-width: 576px) {
  .hero-intro h1 { font-size:1.6rem; }
  .features-section i { font-size:2rem; }
}
</style>
{% endblock %}

{% block content %}
<!-- HERO INTRO -->
<section class="hero-intro fade-up">
  <div class="container">
    <h1>Bienvenue sur <span style="color: var(--white);">Lost & Found</span></h1>
    <p>D√©clarez un objet perdu, consultez les objets retrouv√©s et contribuez √† reconnecter les citoyens √† leurs biens.</p>
  </div>
</section>

<!-- HERO ACTIONS -->
<section class="hero-actions fade-up">
  <a href="{% url 'objets_perdus' %}" class="btn-action btn-lost">üîç Voir objets perdus</a>
  <a href="{% url 'objets_trouves' %}" class="btn-action btn-found">üì¶ Voir objets trouv√©s</a>
  {% if user.is_authenticated and user.role == 'citoyen' %}
    <a href="{% url 'dashboard_citoyen' %}" class="btn-action btn-dashboard">üìä Mon Dashboard</a>
  {% endif %}
</section>

<!-- CAROUSEL -->
<section class="py-5 fade-up">
  <div id="carouselAll" class="carousel slide carousel-fade" data-bs-ride="carousel">
    <div class="carousel-inner">
      {% for slide in all_slides %}
      <div class="carousel-item {% if forloop.first %}active{% endif %}">
        <img src="{{ slide.url }}" alt="{{ slide.titre }}">
        <div class="carousel-caption">
          <h5>{{ slide.titre }}</h5>
          <p>{{ slide.description }}</p>
          {% if slide.etat_type == 'perdu' %}
            <span class="badge bg-danger">Perdu</span>
          {% elif slide.etat_type == 'reclame' %}
            <span class="badge bg-warning text-dark">R√©clam√©</span>
          {% elif slide.etat_type == 'trouve' %}
            <span class="badge bg-success">Trouv√©</span>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselAll" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
      <span class="visually-hidden">Pr√©c√©dent</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselAll" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
      <span class="visually-hidden">Suivant</span>
    </button>
  </div>
</section>

<!-- FEATURES -->
<section id="about" class="features-section fade-up">
  <div class="container">
    <h2 class="text-center fw-bold mb-5" style="color: var(--accent-color);">Les avantages de notre plateforme</h2>
    <div class="row text-center g-4">
      <div class="col-md-4">
        <div class="card p-4 h-100">
          <i class="bi bi-box-seam"></i>
          <h4>D√©clarer un objet perdu</h4>
          <p>Signalez un objet perdu avec un formulaire intuitif et rapide.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card p-4 h-100">
          <i class="bi bi-search"></i>
          <h4>Consulter les objets retrouv√©s</h4>
          <p>Acc√©dez facilement √† la liste des objets retrouv√©s pr√®s de chez vous.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card p-4 h-100">
          <i class="bi bi-clock-history"></i>
          <h4>Suivre vos d√©marches</h4>
          <p>Restez inform√© sur l‚Äô√©tat de vos d√©clarations et restitutions.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- RESTITUTION -->
<section id="restitution" class="fade-up">
  <div class="container">
    <h2 class="text-center fw-bold mb-5" style="color: var(--accent-color);">Comment se passe la restitution</h2>
    <div class="row align-items-center g-4">
      <div class="col-md-6 text-center">
        <img src="{% static 'frontend/images/preuve.png' %}" class="img-fluid rounded shadow-sm" alt="Preuve">
      </div>
      <div class="col-md-6">
        {% for step in steps %}
        <div class="step">
          <h5 class="fw-bold">{{ step.title }}</h5>
          <p>{{ step.desc }}</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<!-- PARTENAIRES -->
<section class="partners fade-up">
  <div class="container">
    <h2 class="fw-bold mb-4" style="color: var(--accent-color);">Nos Partenaires</h2>
    <div class="row justify-content-center align-items-center g-4">
      <div class="col-4 col-md-2"><img src="{% static 'frontend/img/partenaire1.png' %}" class="img-fluid" alt="Partenaire 1"></div>
      <div class="col-4 col-md-2"><img src="{% static 'frontend/img/partenaire2.jpg' %}" class="img-fluid" alt="Partenaire 2"></div>
      <div class="col-4 col-md-2"><img src="{% static 'frontend/img/partenaire3.jpg' %}" class="img-fluid" alt="Partenaire 3"></div>
    </div>
  </div>
</section>

<!-- CTA (blanc et or) -->
<section class="cta fade-up">
  <div class="container">
    <h2>Vous avez perdu ou trouv√© un objet ?</h2>
    <p>Faites une d√©claration d√®s maintenant et contribuez √† la restitution rapide des objets perdus.</p>
    <a href="{% url 'declarer_objet' %}" class="btn btn-cta">üìù Faire une d√©claration</a>
  </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const elements = document.querySelectorAll(".fade-up");
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add("show");
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.2 });
  elements.forEach(el => observer.observe(el));
});
</script>
{% endblock %}
