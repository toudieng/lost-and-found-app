{% extends 'frontend/base.html' %}
{% load static %}

{% block title %}Accueil - Objets Perdus{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'frontend/css/home.css' %}">

<style>
/* =========================
   Boutons hero-actions
========================= */
.hero-actions .btn-action {
    position: relative;
    display: inline-block;
    padding: 1rem 2.5rem;
    font-size: 1.3rem;
    font-weight: 700;
    border-radius: 0.7rem;
    margin: 0.8rem;
    color: #fff;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
    text-decoration: none;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.35s ease;
    letter-spacing: 0.5px;
}

.btn-action-lost {
    background: linear-gradient(135deg, #ff5c5c, #e53946);
}

.btn-action-found {
    background: linear-gradient(135deg, #4cd964, #28a745);
}

.btn-action:hover {
    transform: translateY(-4px) scale(1.05);
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}

.btn-action::before {
    content: '';
    position: absolute;
    top: 0; left: -75%;
    width: 50%; height: 100%;
    background: linear-gradient(120deg, rgba(255,255,255,0.3), rgba(255,255,255,0.05), rgba(255,255,255,0.3));
    transform: skewX(-25deg);
    transition: left 0.5s ease;
}
.btn-action:hover::before { left: 125%; }

/* =========================
   CTA finale
========================= */
.cta {
    padding: 80px 0;
    text-align: center;
    background-color: #495057;
    color: #fff;
    border-radius: 1rem;
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);
}

.cta h2 {
    font-size: 2.4rem;
    font-weight: 700;
    margin-bottom: 1rem;
}

.cta p {
    font-size: 1.25rem;
    margin-bottom: 2rem;
}

.cta .btn-cta {
    font-weight: 700;
    font-size: 1.1rem;
    padding: 0.9rem 2.2rem;
    border-radius: 0.6rem;
    background: #ffc107;
    color: #343a40;
    transition: all 0.3s ease;
}
.cta .btn-cta:hover {
    background: #ffca28;
    transform: scale(1.07);
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}

/* =========================
   Carousels
========================= */

.carousel-inner img {
    object-fit: cover;
    object-position: center;
    width: 100%;
    height: 230px;
    transition: transform 0.5s ease, filter 0.4s ease;
    filter: brightness(1.3) contrast(1.15) saturate(1.2);
}
@media (min-width: 768px) { .carousel-inner img { height: 340px; } }
@media (min-width: 1200px) { .carousel-inner img { height: 450px; } }

.carousel-inner img:hover {
    transform: scale(1.05);
    filter: brightness(1.4) contrast(1.2) saturate(1.25);
}

.carousel-caption {
    background-color: rgba(0, 0, 0, 0.5);
    padding: 0.8rem 1.3rem;
    border-radius: 0.5rem;
    backdrop-filter: blur(4px);
    max-width: 85%;
    left: 50%;
    transform: translateX(-50%);
}

.carousel-caption h5,
.carousel-caption p {
    color: #fff;
    text-shadow: 1px 1px 5px rgba(0,0,0,0.75);
}

/* =========================
   Autres sections
========================= */
.hero-intro {
    background: #f8f9fa;
    border-radius: 1rem;
    box-shadow: inset 0 -1px 6px rgba(0,0,0,0.1);
}

.features-section .card {
    border: none;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.features-section .card:hover {
    transform: translateY(-6px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

.partners img {
    transition: transform 0.4s ease, opacity 0.3s ease;
    opacity: 0.85;
}
.partners img:hover {
    transform: scale(1.1);
    opacity: 1;
}
</style>
{% endblock %}

{% block content %}
<!-- INTRO -->
<section class="hero-intro py-5 text-center" style="
  background: radial-gradient(circle at top left, #6c1e3d, #a83279 60%, #5b1b3a 100%);
  color: #fff;
  border-radius: 1rem;
  box-shadow: 0 10px 25px rgba(0,0,0,0.25);
  position: relative;
  overflow: hidden;
">
  <!-- l√©ger effet de brillance -->
  <div style="
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    transform: rotate(25deg);
  "></div>

  <div class="container position-relative">
    <h1 class="display-4 fw-bold mb-4">üì¶ Bienvenue sur la plateforme Lost & Found</h1>
    <p class="lead mb-4 fs-5">D√©clarez un objet perdu, consultez les objets retrouv√©s et suivez vos d√©marches en toute s√©curit√©.</p>
    <a href='{% url "declarer_objet" %}' class="btn btn-warning btn-lg fw-bold shadow mt-3">
       Vous pouvez faire une declaration 
    </a>
  </div>
</section>

<!-- SECTION : CAROUSEL -->
<section class="py-5">
  <div class="container">
    <h2 id="about1" class="text-center fw-bold mb-4">üì¶ Objets R√©cents</h2>

    {% if all_slides %}
    <div id="carouselAll" class="carousel slide carousel-fade" data-bs-ride="carousel">
      
      <!-- Indicators -->
      <div class="carousel-indicators">
        {% for slide in all_slides %}
        <button type="button" data-bs-target="#carouselAll" data-bs-slide-to="{{ forloop.counter0 }}"
                class="{% if forloop.first %}active{% endif %}"
                aria-current="{% if forloop.first %}true{% endif %}"
                aria-label="Slide {{ forloop.counter }}"></button>
        {% endfor %}
      </div>

      <!-- Slides -->
      <div class="carousel-inner rounded-4 shadow-lg overflow-hidden">
        {% for slide in all_slides %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <img src="{{ slide.url }}" class="d-block w-100" alt="{{ slide.titre }}">
          <div class="carousel-caption d-none d-md-block">
            <h5>
              {{ slide.titre }}
              {% if slide.etat %}
                <span class="badge {% if slide.etat_type == 'perdu' %}bg-danger{% else %}bg-success{% endif %} ms-2">
                  {{ slide.etat }}
                </span>
              {% endif %}
            </h5>
            {% if slide.description %}
              <p>{{ slide.description }}</p>
            {% endif %}
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- Controls -->
      <button class="carousel-control-prev" type="button" data-bs-target="#carouselAll" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
        <span class="visually-hidden">Pr√©c√©dent</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselAll" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
        <span class="visually-hidden">Suivant</span>
      </button>
    </div>
    {% else %}
    <p class="text-center text-muted">Aucun objet √† afficher pour le moment.</p>
    {% endif %}
  </div>
</section>



<!-- BOUTONS ACTION -->
<section class="hero-actions py-5 text-center">
  <div class="container">
    <a href="{% url 'objets_perdus' %}" class="btn-action btn-action-lost">‚ùå Voir les objets perdus</a>
    <a href="{% url 'objets_trouves' %}" class="btn-action btn-action-found">‚úÖ Voir les objets trouv√©s</a>
    {% if user.is_authenticated and user.role == 'citoyen' %}
    <a href="{% url 'dashboard_citoyen' %}" class="btn-action mt-3" style="background:#343a40;">üè† Mon Dashboard</a>
    {% endif %}
  </div>
</section>

<!-- AVANTAGES -->
<section id="about" class="features-section py-5">
  <div class="container">
    <h2 class="text-center fw-bold mb-5">‚ú® Les avantages de notre plateforme</h2>
    <div class="row text-center g-4">
      <div class="col-md-4">
        <div class="card shadow-sm p-4 h-100">
          <i class="fa-solid fa-box-open fa-3x mb-3 text-danger"></i>
          <h4 class="fw-bold mb-3">D√©clarer un objet perdu</h4>
          <p>Signalez rapidement un objet perdu gr√¢ce √† un formulaire simple et intuitif.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card shadow-sm p-4 h-100">
          <i class="fa-solid fa-magnifying-glass fa-3x mb-3 text-success"></i>
          <h4 class="fw-bold mb-3">Consulter les objets retrouv√©s</h4>
          <p>Acc√©dez √† la liste des objets retrouv√©s et v√©rifiez si le v√¥tre est disponible.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card shadow-sm p-4 h-100">
          <i class="fa-solid fa-folder-open fa-3x mb-3 text-primary"></i>
          <h4 class="fw-bold mb-3">Suivre vos d√©marches</h4>
          <p>Suivez l‚Äôavancement de vos d√©clarations et notifications en temps r√©el.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- PARTENAIRES -->
<section class="partners py-6 bg-light text-center">
  <div class="container">
    <h2 class="display-6 fw-bold mb-4">ü§ù Nos Partenaires</h2>
    <p class="text-muted mb-5">Nous collaborons avec des organismes et entreprises de confiance pour faciliter la restitution.</p>
    <div class="row justify-content-center align-items-center g-4">
      <div class="col-4 col-md-2"><img src="{% static 'frontend/img/partenaire1.png' %}" class="img-fluid" alt="Partenaire 1"></div>
      <div class="col-4 col-md-2"><img src="{% static 'frontend/img/partenaire2.jpg' %}" class="img-fluid" alt="Partenaire 2"></div>
      <div class="col-4 col-md-2"><img src="{% static 'frontend/img/partenaire3.jpg' %}" class="img-fluid" alt="Partenaire 3"></div>
      <div class="col-4 col-md-2"><img src="{% static 'frontend/img/partenaire4.jpg' %}" class="img-fluid" alt="Partenaire 4"></div>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="cta text-center py-5">
  <div class="container">
    <h2 class="display-5 mb-3">Vous avez perdu un objet ?</h2>
    <p class="mb-4 fs-5">D√©clarez-le d√®s maintenant et augmentez vos chances de le retrouver rapidement.</p>
    <a href="{% url 'declarer_objet' %}" class="btn btn-cta shadow-lg">
      <i class="bi bi-plus-circle me-2"></i> D√©clarer un objet perdu
    </a>
  </div>
</section>

{% endblock %}
